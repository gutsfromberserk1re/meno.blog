<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Level Up News</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #fff;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #1f1f1f;
      padding: 1rem;
      text-align: center;
      font-size: 2rem;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      padding: 1rem;
      gap: 1rem;
    }
    .featured, .latest {
      background-color: #2a2a2a;
      padding: 1rem;
      border-radius: 10px;
      box-sizing: border-box;
    }
    .featured {
      flex: 3;
      min-width: 60%;
    }
    .latest {
      flex: 2;
      min-width: 35%;
    }
    .article {
      background-color: #3a3a3a;
      margin-bottom: 1rem;
      padding: 1rem;
      border-radius: 8px;
      transition: 0.2s;
    }
    .article:hover {
      background-color: #505050;
    }
    .article img {
      max-width: 100%;
      border-radius: 5px;
    }
    .article h2 {
      margin: 0.5rem 0;
    }
    .tags {
      margin-top: 0.5rem;
      font-size: 0.9rem;
    }
    .tags span {
      background: #444;
      padding: 0.2rem 0.5rem;
      margin-right: 0.3rem;
      border-radius: 4px;
    }
    .more-articles {
      width: 100%;
      background-color: #1e1e1e;
      margin-top: 2rem;
      padding: 1rem;
      border-radius: 10px;
    }
    .more-articles h3 {
      margin-bottom: 1rem;
    }
    .more-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 1rem;
    }
    a {
      color: inherit;
      text-decoration: none;
    }
  </style>
</head>
<body>

<header>Level Up News</header>

<div class="container">
  <div class="featured" id="featured">
    <h2>Featured</h2>
  </div>
  <div class="latest" id="latest">
    <h2>Latest</h2>
  </div>

  <div class="more-articles">
    <h3>More Articles</h3>
    <div class="more-grid" id="more"></div>
  </div>
</div>

<script>
  async function loadArticles() {
    const featured = document.getElementById("featured");
    const latest = document.getElementById("latest");
    const more = document.getElementById("more");

    try {
      const res = await fetch("articles-json/");
      if (!res.ok) throw new Error("Cannot fetch directory");
    } catch {
      displayDummy();
      return;
    }

    let jsons = [];
    try {
      // manually define files if directory listing isn't available
      jsons = ["article1.json", "article2.json"]; // Add more here
    } catch {
      displayDummy();
      return;
    }

    const articles = [];
    for (const file of jsons) {
      try {
        const res = await fetch("articles-json/" + file);
        if (!res.ok) continue;
        const data = await res.json();
        articles.push(data);
      } catch (e) {
        console.warn("Failed to load:", file);
      }
    }

    if (articles.length === 0) {
      displayDummy();
      return;
    }

    // Display logic
    articles.forEach((a, i) => {
      const html = `
        <a href="${a.link}">
          <div class="article">
            <img src="${a.image}" alt="${a.title}">
            <h2>${a.title}</h2>
            <p>${a.summary}</p>
            <div class="tags">${a.tags.map(t => `<span>${t}</span>`).join('')}</div>
          </div>
        </a>
      `;
      if (i === 0) {
        featured.innerHTML += html;
      } else if (i === 1) {
        latest.innerHTML += html;
      } else {
        more.innerHTML += html;
      }
    });
  }

  function displayDummy() {
    const dummy = {
      title: "Dummy Article",
      summary: "This is a placeholder article because no content was found.",
      image: "https://via.placeholder.com/400x200?text=Dummy",
      tags: ["news", "tech"],
      link: "#"
    };
    const html = `
      <a href="${dummy.link}">
        <div class="article">
          <img src="${dummy.image}" alt="${dummy.title}">
          <h2>${dummy.title}</h2>
          <p>${dummy.summary}</p>
          <div class="tags">${dummy.tags.map(t => `<span>${t}</span>`).join('')}</div>
        </div>
      </a>
    `;
    document.getElementById("featured").innerHTML += html;
    document.getElementById("latest").innerHTML += html;
    document.getElementById("more").innerHTML += html + html;
  }

  loadArticles();
</script>

</body>
</html>

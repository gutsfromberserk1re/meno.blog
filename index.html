<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Meno Blog - Home</title>
<style>
  /* Reset and base */
  * {
    margin: 0; padding: 0; box-sizing: border-box;
    font-family: Arial, sans-serif;
  }
  body {
    background: #121212;
    color: #eee;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    padding: 1rem 2rem;
    transition: background 0.3s, color 0.3s;
  }
  body.light {
    background: #f9f9f9;
    color: #222;
  }
  header {
    display: flex;
    justify-content: flex-end;
    padding-bottom: 1rem;
  }
  #logo {
    font-size: 2rem;
    font-weight: bold;
    cursor: pointer;
    user-select: none;
    color: #ff6b35;
  }
  .striped-o {
    background: repeating-linear-gradient(
      45deg,
      #ff6b35,
      #ff6b35 6px,
      white 6px,
      white 12px
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    display: inline-block;
    font-weight: bold;
  }
  main {
    display: flex;
    gap: 2rem;
    flex: 1;
    max-width: 1200px;
    margin: 0 auto;
  }
  #featured-article {
    flex-basis: 60%;
    background: #1e1e1e;
    padding: 2rem;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
  }
  body.light #featured-article {
    background: #fff;
  }
  #featured-article h1 {
    color: #ff6b35;
    margin-bottom: 1rem;
  }
  body.light #featured-article h1 {
    color: #ff6b35;
  }
  #featured-article p {
    line-height: 1.5;
    color: #ccc;
  }
  body.light #featured-article p {
    color: #444;
  }
  #featured-article img {
    margin-top: 1rem;
    max-width: 100%;
    border-radius: 6px;
    object-fit: cover;
    max-height: 300px;
  }
  /* Middle Articles with image on right */
  #middle-articles {
    flex-basis: 40%;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
  #middle-articles article {
    background: #1e1e1e;
    padding: 1.5rem;
    border-radius: 8px;
    display: flex;
    gap: 1rem;
    align-items: center;
  }
  body.light #middle-articles article {
    background: #fff;
  }
  #middle-articles article > div {
    flex: 1;
    order: 1;
  }
  #middle-articles article h3,
  #middle-articles article p {
    color: #ccc;
    margin: 0;
  }
  body.light #middle-articles article h3,
  body.light #middle-articles article p {
    color: #444;
  }
  #middle-articles article h3 {
    color: #ff6b35;
    margin-bottom: 0.5rem;
  }
  body.light #middle-articles article h3 {
    color: #ff6b35;
  }
  #middle-articles img {
    max-width: 140px;
    max-height: 100px;
    border-radius: 6px;
    object-fit: cover;
    flex-shrink: 0;
    order: 2;
  }
  /* Following Articles (bottom) with image on right */
  #more-articles {
    max-width: 1200px;
    margin: 2rem auto 3rem;
    display: flex;
    flex-direction: column;
    gap: 1.8rem;
    padding: 0 1rem;
  }
  #more-articles article {
    background: #1e1e1e;
    padding: 1.5rem 2rem;
    border-radius: 8px;
    display: flex;
    gap: 1rem;
    align-items: center;
  }
  body.light #more-articles article {
    background: #fff;
  }
  #more-articles article > div {
    flex: 1;
    order: 1;
  }
  #more-articles h4,
  #more-articles p {
    margin: 0;
    color: #ccc;
  }
  body.light #more-articles h4,
  body.light #more-articles p {
    color: #444;
  }
  #more-articles h4 {
    color: #ff6b35;
    margin-bottom: 0.5rem;
    font-size: 1.3rem;
  }
  body.light #more-articles h4 {
    color: #ff6b35;
  }
  #more-articles p {
    line-height: 1.5;
    font-size: 1.1rem;
  }
  #more-articles img {
    max-width: 140px;
    max-height: 100px;
    border-radius: 6px;
    object-fit: cover;
    flex-shrink: 0;
    order: 2;
  }
</style>
</head>
<body>
<header>
  <div id="logo" title="Click to toggle dark/light mode">
    me<span class="striped-o">n</span>o
  </div>
</header>

<main>
  <section id="featured-article" aria-label="Featured article">
    <!-- Loaded by JS -->
  </section>

  <section id="middle-articles" aria-label="Latest articles">
    <!-- Loaded by JS -->
  </section>
</main>

<section id="more-articles" aria-label="More articles">
  <!-- Loaded by JS -->
</section>

<script>
  const logo = document.getElementById('logo');
  logo.addEventListener('click', () => {
    document.body.classList.toggle('light');
  });

  // Utility to pick random element from array
  function randomChoice(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }

  // Fetch all article JSON files from articles_json folder (simulate here)
  async function fetchArticlesList() {
    // Since JS can't read directory listing from GitHub or local file system,
    // you have to provide a list manually or generate an index.json with article filenames.
    // For demo, here's a fixed list of article JSON filenames:
    return [
      'articles_json/article1.json',
      'articles_json/article2.json',
      'articles_json/article3.json',
      'articles_json/article4.json',
      'articles_json/article5.json',
      'articles_json/article6.json',
      'articles_json/article7.json',
      'articles_json/article8.json'
    ];
  }

  // Fetch single article JSON by URL
  async function fetchArticleJSON(url) {
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error('Network response not ok');
      return await response.json();
    } catch (err) {
      console.error('Failed to fetch article:', url, err);
      return null;
    }
  }

  // Render article for featured section
  function renderFeatured(article) {
    const container = document.getElementById('featured-article');
    container.innerHTML = `
      <h1>${article.title}</h1>
      <p>${article.summary}</p>
      <img src="${randomChoice(article.images)}" alt="${article.title} image" />
    `;
  }

  // Render article for middle articles
  function renderMiddle(article) {
    return `
      <article>
        <div>
          <h3>${article.title}</h3>
          <p>${article.summary}</p>
        </div>
        <img src="${randomChoice(article.images)}" alt="${article.title} image" />
      </article>
    `;
  }

  // Render article for more articles (bottom)
  function renderMore(article) {
    return `
      <article>
        <div>
          <h4>${article.title}</h4>
          <p>${article.summary}</p>
        </div>
        <img src="${randomChoice(article.images)}" alt="${article.title} image" />
      </article>
    `;
  }

  async function loadArticles() {
    const articlesURLs = await fetchArticlesList();

    // Fetch all articles JSON
    const articles = (await Promise.all(articlesURLs.map(fetchArticleJSON))).filter(Boolean);

    if(articles.length === 0) {
      console.warn('No articles loaded');
      return;
    }

    // Featured article: pick 1 random
    const featuredArticle = randomChoice(articles);
    renderFeatured(featuredArticle);

    // Middle articles: pick 3 random excluding featured
    const middleArticles = [];
    while(middleArticles.length < 3 && middleArticles.length < articles.length - 1) {
      let candidate = randomChoice(articles);
      if(candidate !== featuredArticle && !middleArticles.includes(candidate)) {
        middleArticles.push(candidate);
      }
    }
    document.getElementById('middle-articles').innerHTML = middleArticles.map(renderMiddle).join('');

    // More articles: pick 4 random excluding featured and middle
    const exclude = new Set([featuredArticle, ...middleArticles]);
    const moreArticles = [];
    while(moreArticles.length < 4 && moreArticles.length < articles.length - exclude.size) {
      let candidate = randomChoice(articles);
      if(!exclude.has(candidate) && !moreArticles.includes(candidate)) {
        moreArticles.push(candidate);
      }
    }
    document.getElementById('more-articles').innerHTML = moreArticles.map(renderMore).join('');
  }

  document.addEventListener('DOMContentLoaded', loadArticles);
</script>

</body>
</html>
